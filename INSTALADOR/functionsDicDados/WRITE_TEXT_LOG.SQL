CREATE OR REPLACE FUNCTION comp.write_text_log(level integer, id_expression numeric, vl_duration interval, ini_time timestamp without time zone)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
DECLARE
MASTER_LOG_ID		NUMERIC;
MASTER_LOG_SCHEMA 	NUMERIC;
BEGIN
	SELECT ID, ID_DATABASE_SCHEMA INTO MASTER_LOG_ID, MASTER_LOG_SCHEMA FROM TB_LOG ORDER BY ID DESC LIMIT 1;
	
	BEGIN
	INSERT INTO COMP.LOG_SYNCHRONIZER(LEVEL,INITIAL_TIME,DURATION,ID_EXPRESSION_MESSAGE,ID_DATABASE_SCHEMA,ID_SUP)
		VALUES
		($1,$4,$3,$2,MASTER_LOG_SCHEMA,MASTER_LOG_ID);
	EXCEPTION WHEN unique_violation THEN
	END;			
END;
$function$
